# .bash_profile executed by bash(1) for login shells.

# Save system paths the first time
if [ -z "${SYSTEM_PATH}" ] ; then
    export SYSTEM_PATH="${PATH}"
    export SYSTEM_LD_LIBRARY_PATH="${LD_LIBRARY_PATH}"
    export SYSTEM_PERL5LIB="${PERL5LIB}"
    export SYSTEM_PKG_CONFIG_PATH="${PKG_CONFIG_PATH}"
fi

if [[ -f ~/.path_dirs ]]; then
    while read -r xtrad || [[ -n "${xtrad}" ]];
    do
        if [[ -z "${xtrad}" || "${xtrad}" == \#* ]]; then
            continue
        fi
        # Set PATH so it includes user's private bin if it exists
        if [ -d "${xtrad}/bin" ]; then
            PATH="${xtrad}/bin:${PATH}"
        fi
        
        # Set PATH so it includes user's private lib if it exists
        if [ -d "${xtrad}/lib" ]; then
            PATH="${xtrad}/lib:${PATH}"
            LD_LIBRARY_PATH="${xtrad}/lib:${LD_LIBRARY_PATH}"
        fi
        
        # Set PKG_CONFIG_PATH so it includes user's private if it exists
        if [ -d "${xtrad}/lib/pkgconfig" ]; then
            PKG_CONFIG_PATH="${xtrad}/lib/pkgconfig:${PKG_CONFIG_PATH}"
        fi
        
        # Set MANPATH so it includes users' private man if it exists
        if [ -d "${xtrad}/man" ]; then
            MANPATH="${xtrad}/man:${MANPATH}"
        fi
        if [ -d "${xtrad}/share/man" ]; then
            MANPATH="${xtrad}/share/man:${MANPATH}"
        fi
        
        # Set INFOPATH so it includes users' private info if it exists
        if [ -d "${xtrad}/info" ]; then
            INFOPATH="${xtrad}/info:${INFOPATH}"
        fi
        
        # Set PERL5LIB so it includes users' private perl5 if it exists
        if [ -d "${xtrad}/lib/perl5" ]; then
            PERL5LIB="${xtrad}/lib/perl5:${PERL5LIB}"
        fi
        if [ -d "${xtrad}/share/perl5" ]; then
            PERL5LIB="${xtrad}/lib/perl5:${PERL5LIB}"
        fi
        for pl5 in ${xtrad}/lib/perl5/site_perl/*;
        do
            if [ -d "${pl5}" ]; then
                PERL5LIB="${pl5}:${PERL5LIB}"
            fi
        done
        for pl5 in ${xtrad}/share/perl5/*;
        do
            if [ -d "${pl5}" ]; then
                PERL5LIB="${pl5}:${PERL5LIB}"
            fi
        done
     
        unset pl5
    done < ~/.path_dirs
fi

if [[ -f ~/.paths ]]; then
    while read -r path || [[ -n "${path}" ]];
    do
        if [[ -z "${path}" || "${path}" == \#* ]]; then
            continue
        fi
        PATH="${PATH}:${path}"
    done < ~/.paths
fi

export PATH
export LD_LIBRARY_PATH
export MANPATH
export INFOPATH
export PERL5LIB

# For nedit bug...
export XLIB_SKIP_ARGB_VISUALS=1

# Bash reads:
# - .bash_profile for interactive login shells
# - .bashrc for non-login intecactive shells.
# 
# source the users bashrc if it exists
if [[ -f "${HOME}/.bashrc" ]]; then
    source "${HOME}/.bashrc"
fi
